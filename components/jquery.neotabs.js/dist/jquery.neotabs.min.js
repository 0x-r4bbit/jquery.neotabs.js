/*! jQuery NeoTabs - v0.2.0 - 2012-11-08
* https://github.com/PascalPrecht/jquery.neotabs.js
* Copyright (c) 2012 Pascal Precht; Licensed  */
(function(a,b,c){function k(c,d){var k=this;a.extend(k,{$el:c,opts:a.extend({},f,d),hasDropdown:!1,hasPreActiveTab:!1,preActiveId:"",tabsList:null,dropdownTabsList:null,currentTabsCount:g}),k.tabsList=new l({clearfixClass:k.opts.clearfixClass,tabsListClass:k.opts.tabsListClass}),k.$el.wrapInner('<div class="'+k.opts.wrapperClass+'"></div>'),k.$el.find(k.opts.tabHeadElement).each(function(b){var c=a(this);!k.hasDropdown&&c.hasDataAttr("neotabs-dropdown")&&(k.dropdownTabsList=new l({clearfixClass:k.opts.dropdownTabsClearfixClass,tabsListClass:k.opts.dropdownTabsListClass}),k.hasDropdown=!0),!k.hasPreActiveTab&&c.hasDataAttr("neotabs-active")&&(c.addClass(k.opts.activeClass),k.hasPreActiveTab=!0);var d=new m({label:c.html(),id:j("accessibletabscontent",g,b),navigationId:j("accessibletabsnavigation",g,b),tabsList:null,cssClass:k.opts.cssClassAvailable?(c.attr("class")||"")+" "+k.opts.tabHeadClass:k.opts.tabHeadClass});k.hasDropdown?k.dropdownTabsList.addTab(d):k.tabsList.addTab(d),k.hasPreActiveTab&&k.preActiveId===""&&(k.preActiveId=d.id),c.parent("."+k.opts.tabBodyClass).attr("id",j("accessibletabscontentbody",g,b)),c.attr({id:d.id,"class":k.opts.tabHeadClass,"tab-index":"-1"})}),k.hasDropdown&&k.tabsList.addTab(new m({label:k.opts.dropdownTabLabel,id:j("accessibletabsdropdown",g),navigationId:"",tabsList:k.dropdownTabsList,cssClass:k.opts.tabHeadClass+" "+k.opts.dropdownTabClass})),k.$el.find("."+k.opts.tabsListClass).length||k.$el[i[k.opts.tabsPosition]](k.tabsList.toHtml());var n=k.$el.find("."+k.opts.tabBodyClass),o=k.$el.find("."+k.opts.tabsListClass);n.length>0&&(n.attr("aria-hidden",!0).hide(),a(n[0]).attr("aria-hidden",!1).show()),o.find(" > li:first").addClass(k.opts.firstTabClass+(k.hasPreActiveTab?"":" "+k.opts.activeClass)).closest("ul").find("> li:last").addClass(k.opts.lastTabClass),k.opts.wrapInnerTabs&&o.find("> li > a").wrapInner(k.opts.wrapInnerTabs),o.find("> li a").each(function(b){a(this).on("click",function(c){c.preventDefault();var d=a(this).parent();if(!d.hasClass(k.opts.activeClass)){var e=!!d.hasClass(k.opts.dropdownTabClass),f=!!a(this).closest("."+k.opts.dropdownTabClass).length;e?d.removeClass(k.opts.dropdownTabActiveClass):(o.find("."+k.opts.activeClass).removeClass(k.opts.activeClass),o.find("."+k.opts.dropdownTabActiveClass).removeClass(k.opts.dropdownTabActiveClass),f&&d.closest("."+k.opts.dropdownTabClass).addClass(k.opts.dropdownTabActiveClass)),d.addClass(k.opts.activeClass)}else d.hasClass(k.opts.dropdownTabClass)&&d.removeClass(k.opts.activeClass),d.hasClass(k.opts.dropdownTabActiveClass)&&d.removeClass(k.opts.dropdownTabActiveClass);a(this).blur();var g=b;if(!d.hasClass(k.opts.dropdownTabClass)){k.$el.find("."+k.opts.tabBodyClass+":visible").hide(),a(this).closest("."+k.opts.dropdownTabClass).length&&(g=b-1),a(this).focus().keyup(function(b){h[b.keyCode]&&k.activateTab(j("#accessibletabscontent",k.currentTabsCount,g+h[b.keyCode]))&&a(this).unbind("keyup")});var i=a(this).attr("id").replace("accessibletabscontent","accessibletabscontentbody"),l=k.$el.find("#"+i);l.length>0&&(k.$el.find("."+k.opts.tabBodyClass).attr("aria-hidden",!0),l.attr("aria-hidden",!1)[k.opts.fx](k.opts.fxSpeed))}}),a(this).focus(function(){a(e).keyup(function(a){h[a.keyCode]&&k.activateTab("#"+j("accessibletabscontent",k.currentTabsCount,b+h[a.keyCode]))})}),a(this).blur(function(){a(e).unbind("keyup")})}),k.opts.autoAnchor&&b.location.hash&&k.activateTab(b.location.hash),k.hasPreActiveTab&&k.activateTab("#"+k.preActiveId),g++}function l(a){this.tabs=[],this.clearfixClass=a.clearfixClass,this.tabsListClass=a.tabsListClass}function m(a){this.label=a.label,this.id=a.id,this.navigationId=a.navigationId,this.tabsList=a.tabsList,this.cssClass=a.cssClass}var d="neoTabs",e=b.document,f={wrapperClass:"content",activeClass:"active",tabHeadClass:"tabhead",tabBodyClass:"tabbody",firstTabClass:"first",lastTabClass:"last",clearfixClass:"group",tabsListClass:"tabs-list",tabHeadElement:"h4",tabsPosition:"top",cssClassAvailable:!0,fx:"show",fxSpeed:0,autoAnchor:!0,wrapInnerTabs:"",dropdownTabLabel:"&#x25BE;",dropdownTabClass:"dropdown",dropdownTabActiveClass:"hidden-active",dropdownTabsListClass:"tabs-list",dropdownTabsClearfixClass:"group"},g=0,h={37:-1,38:-1,39:1,40:1},i={top:"prepend",bottom:"append"},j=function(a,b,d){var e=a+b;return d!==c&&(e+="-"+d),e};a.fn.hasDataAttr=function(a){var b=this.attr("data-"+a);return typeof b!="undefined"&&b!==!1},a("body").data("accessibleTabsCount")!==c&&(g=a("body").data("accessibleTabsCount")),a("body").data("accessibleTabsCount",g),k.prototype=function(){return{activateTab:function(b){var c=a(b);return c.length>0?(c.click(),!0):!1},toggleDropdown:function(){var a=this.$el.find("."+this.opts.dropdownTabClass+"> a").attr("id");return this.activateTab("#"+a)},openDropdown:function(){this.toggleDropdown()},closeDropdown:function(){this.toggleDropdown()}}}(),l.prototype.addTab=function(a){this.tabs.push(a)},l.prototype.toHtml=function(){var a=this.tabs.length,b=0,c='<ul class="'+this.clearfixClass+" "+this.tabsListClass+'">';for(;b<a;b++)c+=this.tabs[b].toHtml();return c},m.prototype.toHtml=function(){var a='<li class="'+this.cssClass+'" id="'+this.navigationId+'"><a href="#'+this.id+'" id="'+this.id+'">'+this.label+"</a>";return this.tabsList&&(a+=this.tabsList.toHtml()),a+="</li>",a},a.fn[d]=function(b){return this.each(function(){a.data(this,"plugin_"+d)||a.data(this,"plugin_"+d,new k(a(this),b))})},b.NeoTabs=k})(jQuery,window);