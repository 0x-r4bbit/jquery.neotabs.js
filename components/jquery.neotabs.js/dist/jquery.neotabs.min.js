/*! jQuery NeoTabs - v0.3.0 - 2012-11-13
* https://github.com/PascalPrecht/jquery.neotabs.js
* Copyright (c) 2012 Pascal Precht; Licensed  */
(function(a,b,c){function j(c,d){var e=this;a.extend(e,{$el:c,opts:a.extend({},f,d),dropdown:!1,hasPreActiveTab:!1,preActiveId:"",tabsList:null,dropdownTabsList:null,currentTabsCount:g,ids:[]}),e.tabsList=new k({clearfixClass:e.opts.clearfixClass,tabsListClass:e.opts.tabsListClass}),e.$el.wrapInner('<div class="'+e.opts.wrapperClass+'"></div>'),e.$el.find(e.opts.tabHeadElement).each(function(b){var c=a(this);!e.hasDropdown()&&c.hasDataAttr("neotabs-dropdown")&&(e.dropdownTabsList=new k({clearfixClass:e.opts.dropdownTabsClearfixClass,tabsListClass:e.opts.dropdownTabsListClass}),e.dropdown=!0),!e.hasPreActiveTab&&c.hasDataAttr("neotabs-active")&&(c.addClass(e.opts.activeClass),e.hasPreActiveTab=!0);var d=new l({label:c.html(),id:i("accessibletabscontent",g,b),navigationId:i("accessibletabsnavigation",g,b),tabsList:null,cssClass:e.opts.cssClassAvailable?(c.attr("class")||"")+" "+e.opts.tabHeadClass:e.opts.tabHeadClass});e.hasDropdown()?e.dropdownTabsList.addTab(d):e.tabsList.addTab(d),e.hasPreActiveTab&&e.preActiveId===""&&(e.preActiveId=d.id),c.parent("."+e.opts.tabBodyClass).attr("id",i("accessibletabscontentbody",g,b)),c.attr({id:d.id,"class":e.opts.tabHeadClass,"tab-index":"-1"}),e.ids.push(d.id)}),e.hasDropdown()&&e.tabsList.addTab(new l({label:e.opts.dropdownTabLabel,id:i("accessibletabsdropdown",g),navigationId:"",tabsList:e.dropdownTabsList,cssClass:e.opts.tabHeadClass+" "+e.opts.dropdownTabClass})),e.$el.find("."+e.opts.tabsListClass).length||e.$el[h[e.opts.tabsPosition]](e.tabsList.toHtml());var j=e.$el.find("."+e.opts.tabBodyClass),m=e.$el.find("."+e.opts.tabsListClass);j.length>0&&(j.attr("aria-hidden",!0).hide(),a(j[0]).attr("aria-hidden",!1).show()),m.find(" > li:first").addClass(e.opts.firstTabClass+(e.hasPreActiveTab?"":" "+e.opts.activeClass)).closest("ul").find("> li:last").addClass(e.opts.lastTabClass),e.opts.wrapInnerTabs&&m.find("> li > a").wrapInner(e.opts.wrapInnerTabs),m.find("> li a").each(function(b){a(this).on("click",function(b){b.preventDefault(),a(this).unbind("keyup");var c=a(this).parent(),d=c.hasClass(e.opts.activeClass),f=c.hasClass(e.opts.dropdownTabClass),g=!!a(this).closest("."+e.opts.dropdownTabClass).length&&!f;f?d?c.removeClass(e.opts.activeClass+" "+e.opts.dropdownTabActiveClass):c.addClass(e.opts.activeClass):(m.find("."+e.opts.activeClass).removeClass(e.opts.activeClass),c.addClass(e.opts.activeClass)),g?m.find("."+e.opts.dropdownTabClass).addClass(e.opts.dropdownTabActiveClass).find("> a").focus():m.find("."+e.opts.dropdownTabActiveClass).removeClass(e.opts.dropdownTabActiveClass);if(!f){e.$el.find("."+e.opts.tabBodyClass+":visible").hide();var h=a(this).attr("id").replace("accessibletabscontent","accessibletabscontentbody"),i=e.$el.find("#"+h);i.length>0&&(e.$el.find("."+e.opts.tabBodyClass).attr("aria-hidden",!0),i.attr("aria-hidden",!1)[e.opts.fx](e.opts.fxSpeed))}a(this).focus()}),a(this).focus(function(b){var c=a(b.target).parent();a(this).unbind("keyup").on("keyup",function(a){var b=c.parents().get(1).tagName==="LI";b?(a.keyCode===38&&(c.hasClass(e.opts.firstTabClass)?c.closest("ul").parent().find("> a").focus():c.prev().find("a").focus()),a.keyCode===40&&c.next().find("a").focus()):((a.keyCode===39||a.keyCode===38)&&e.activateTab("#"+c.next().find("a").attr("id")),a.keyCode===37&&e.activateTab("#"+c.prev().find("a").attr("id")),c.hasClass(e.opts.dropdownTabClass)?c.hasClass(e.opts.activeClass)?a.keyCode===40&&c.find("."+e.opts.tabsListClass+" li:first a").focus():(a.keyCode===40||a.keyCode===32)&&e.openDropdown():a.keyCode===40&&e.activateTab("#"+c.prev().find("a").attr("id")))})})}),e.opts.autoAnchor&&b.location.hash&&e.activateTab(b.location.hash),e.hasPreActiveTab&&e.activateTab("#"+e.preActiveId),g++}function k(a){this.tabs=[],this.clearfixClass=a.clearfixClass,this.tabsListClass=a.tabsListClass}function l(a){this.label=a.label,this.id=a.id,this.navigationId=a.navigationId,this.tabsList=a.tabsList,this.cssClass=a.cssClass}var d="neoTabs",e=b.document,f={wrapperClass:"content",activeClass:"active",tabHeadClass:"tabhead",tabBodyClass:"tabbody",firstTabClass:"first",lastTabClass:"last",clearfixClass:"group",tabsListClass:"tabs-list",tabHeadElement:"h4",tabsPosition:"top",cssClassAvailable:!0,fx:"show",fxSpeed:0,autoAnchor:!0,wrapInnerTabs:"",dropdownTabLabel:"&#x25BE;",dropdownTabClass:"dropdown",dropdownTabActiveClass:"hidden-active",dropdownTabsListClass:"tabs-list",dropdownTabsClearfixClass:"group"},g=0,h={top:"prepend",bottom:"append"},i=function(a,b,d){var e=a+b;return d!==c&&(e+="-"+d),e};a.fn.hasDataAttr=function(a){var b=this.attr("data-"+a);return typeof b!="undefined"&&b!==!1},a("body").data("accessibleTabsCount")!==c&&(g=a("body").data("accessibleTabsCount")),a("body").data("accessibleTabsCount",g),j.prototype=function(){return{activateTab:function(b){var c=a(b);return c.length>0?(c.click(),!0):!1},toggleDropdown:function(){var a=this.$el.find("."+this.opts.dropdownTabClass+"> a").attr("id");return this.activateTab("#"+a)},openDropdown:function(){this.toggleDropdown()},closeDropdown:function(){this.toggleDropdown()},hasDropdown:function(){return this.dropdown}}}(),k.prototype.addTab=function(a){this.tabs.push(a)},k.prototype.toHtml=function(){var a=this.tabs.length,b=0,c='<ul class="'+this.clearfixClass+" "+this.tabsListClass+'">';for(;b<a;b++)c+=this.tabs[b].toHtml();return c},l.prototype.toHtml=function(){var a='<li class="'+this.cssClass+'" id="'+this.navigationId+'"><a href="#'+this.id+'" id="'+this.id+'">'+this.label+"</a>";return this.tabsList&&(a+=this.tabsList.toHtml()),a+="</li>",a},a.fn[d]=function(b){return this.each(function(){a.data(this,"plugin_"+d)||a.data(this,"plugin_"+d,new j(a(this),b))})},b.NeoTabs=j})(jQuery,window);