/*! jQuery NeoTabs - v0.3.2 - 2013-01-17
* https://github.com/PascalPrecht/jquery.neotabs.js
* Copyright (c) 2013 Pascal Precht; Licensed  */
(function(e,t,n){function f(n,r){var i=this;e.extend(i,{$el:n,opts:e.extend({},s,r),dropdown:!1,hasPreActiveTab:!1,preActiveId:"",tabsList:null,dropdownTabsList:null,currentTabsCount:o,ids:[]}),i.tabsList=new l({clearfixClass:i.opts.clearfixClass,tabsListClass:i.opts.tabsListClass}),i.$el.wrapInner('<div class="'+i.opts.wrapperClass+'"></div>'),i.$el.find(i.opts.tabHeadElement).each(function(t){var n=e(this);!i.hasDropdown()&&n.hasDataAttr("neotabs-dropdown")&&(i.dropdownTabsList=new l({clearfixClass:i.opts.dropdownTabsClearfixClass,tabsListClass:i.opts.dropdownTabsListClass}),i.dropdown=!0),!i.hasPreActiveTab&&n.hasDataAttr("neotabs-active")&&(n.addClass(i.opts.activeClass),i.hasPreActiveTab=!0);var r=new c({label:n.html(),id:a("accessibletabscontent",o,t),navigationId:a("accessibletabsnavigation",o,t),tabsList:null,cssClass:i.opts.cssClassAvailable?(n.attr("class")||"")+" "+i.opts.tabHeadClass:i.opts.tabHeadClass});i.hasDropdown()?i.dropdownTabsList.addTab(r):i.tabsList.addTab(r),i.hasPreActiveTab&&i.preActiveId===""&&(i.preActiveId=r.id),n.parent("."+i.opts.tabBodyClass).attr("id",a("accessibletabscontentbody",o,t)),n.attr({id:r.id,"class":i.opts.tabHeadClass,"tab-index":"-1"}),i.ids.push(r.id)}),i.hasDropdown()&&i.tabsList.addTab(new c({label:i.opts.dropdownTabLabel,id:a("accessibletabsdropdown",o),navigationId:"",tabsList:i.dropdownTabsList,cssClass:i.opts.tabHeadClass+" "+i.opts.dropdownTabClass})),i.$el.find("."+i.opts.tabsListClass).length||i.$el[u[i.opts.tabsPosition]](i.tabsList.toHtml());var f=i.$el.find("."+i.opts.tabBodyClass),h=i.$el.find("."+i.opts.tabsListClass);f.length>0&&(f.attr("aria-hidden",!0).hide(),e(f[0]).attr("aria-hidden",!1).show()),h.find(" > li:first").addClass(i.opts.firstTabClass+(i.hasPreActiveTab?"":" "+i.opts.activeClass)).closest("ul").find("> li:last").addClass(i.opts.lastTabClass),i.opts.wrapInnerTabs&&h.find("> li > a").wrapInner(i.opts.wrapInnerTabs),h.find("> li a").each(function(t){e(this).on("click",function(t){t.preventDefault(),e(this).unbind("keyup");var n=e(this).parent(),r=n.hasClass(i.opts.activeClass),s=n.hasClass(i.opts.dropdownTabClass),o=!!e(this).closest("."+i.opts.dropdownTabClass).length&&!s;s?r?n.removeClass(i.opts.activeClass+" "+i.opts.dropdownTabActiveClass):n.addClass(i.opts.activeClass):(h.find("."+i.opts.activeClass).removeClass(i.opts.activeClass),n.addClass(i.opts.activeClass)),o?h.find("."+i.opts.dropdownTabClass).addClass(i.opts.dropdownTabActiveClass).find("> a").focus():h.find("."+i.opts.dropdownTabActiveClass).removeClass(i.opts.dropdownTabActiveClass);if(!s){i.$el.find("."+i.opts.tabBodyClass+":visible").hide();var u=e(this).attr("id").replace("accessibletabscontent","accessibletabscontentbody"),a=i.$el.find("#"+u);a.length>0&&(i.$el.find("."+i.opts.tabBodyClass).attr("aria-hidden",!0),a.attr("aria-hidden",!1)[i.opts.fx](i.opts.fxSpeed))}e(this).focus()}),e(this).focus(function(t){var n=e(t.target).parent();e(this).unbind("keyup").on("keyup",function(e){var t=n.parents().get(1).tagName==="LI";t?(e.keyCode===38&&(n.hasClass(i.opts.firstTabClass)?n.closest("ul").parent().find("> a").focus():n.prev().find("a").focus()),e.keyCode===40&&n.next().find("a").focus()):((e.keyCode===39||e.keyCode===38)&&i.activateTab("#"+n.next().find("a").attr("id")),e.keyCode===37&&i.activateTab("#"+n.prev().find("a").attr("id")),n.hasClass(i.opts.dropdownTabClass)?n.hasClass(i.opts.activeClass)?e.keyCode===40&&n.find("."+i.opts.tabsListClass+" li:first a").focus():(e.keyCode===40||e.keyCode===32)&&i.openDropdown():e.keyCode===40&&i.activateTab("#"+n.prev().find("a").attr("id")))})})}),i.opts.autoAnchor&&t.location.hash&&i.activateTab(t.location.hash),i.hasPreActiveTab&&i.activateTab("#"+i.preActiveId),o++}function l(e){this.tabs=[],this.clearfixClass=e.clearfixClass,this.tabsListClass=e.tabsListClass}function c(e){this.label=e.label,this.id=e.id,this.navigationId=e.navigationId,this.tabsList=e.tabsList,this.cssClass=e.cssClass}var r="neoTabs",i=t.document,s={wrapperClass:"content",activeClass:"active",tabHeadClass:"tabhead",tabBodyClass:"tabbody",firstTabClass:"first",lastTabClass:"last",clearfixClass:"group",tabsListClass:"tabs-list",tabHeadElement:"h4",tabsPosition:"top",cssClassAvailable:!0,fx:"show",fxSpeed:0,autoAnchor:!0,wrapInnerTabs:"",dropdownTabLabel:"&#x25BE;",dropdownTabClass:"dropdown",dropdownTabActiveClass:"hidden-active",dropdownTabsListClass:"tabs-list",dropdownTabsClearfixClass:"group"},o=0,u={top:"prepend",bottom:"append"},a=function(e,t,r){var i=e+t;return r!==n&&(i+="-"+r),i};e.fn.hasDataAttr=function(e){var t=this.attr("data-"+e);return typeof t!="undefined"&&t!==!1},e("body").data("accessibleTabsCount")!==n&&(o=e("body").data("accessibleTabsCount")),e("body").data("accessibleTabsCount",o),f.prototype=function(){return{activateTab:function(t){var n=e(t);return n.length>0?(n.click(),!0):!1},toggleDropdown:function(){var e=this.$el.find("."+this.opts.dropdownTabClass+"> a").attr("id");return this.activateTab("#"+e)},openDropdown:function(){this.toggleDropdown()},closeDropdown:function(){this.toggleDropdown()},hasDropdown:function(){return this.dropdown}}}(),l.prototype.addTab=function(e){this.tabs.push(e)},l.prototype.toHtml=function(){var e=this.tabs.length,t=0,n='<ul class="'+this.clearfixClass+" "+this.tabsListClass+'">';for(;t<e;t++)n+=this.tabs[t].toHtml();return n},c.prototype.toHtml=function(){var e='<li class="'+this.cssClass+'" id="'+this.navigationId+'"><a href="#'+this.id+'" id="'+this.id+'">'+this.label+"</a>";return this.tabsList&&(e+=this.tabsList.toHtml()),e+="</li>",e},e.fn[r]=function(t){return this.each(function(){e.data(this,"plugin_"+r)||e.data(this,"plugin_"+r,new f(e(this),t))})},t.NeoTabs=f})(jQuery,window);